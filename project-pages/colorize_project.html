

<!-- 
  IMPORTANT! 
  
  Keep this file unchanged to use as a template for all future project pages. 

  For every new project you add to your portfolio, make a copy of this file in the
  'project-pages' folder with a name related to the project.
-->


<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
    <!-- 
      TODO

      Upload your Unemployable (or whatever photo you like) to the assets/images folder
      and change the name of the image below to match the uploaded one

      Change the title in the <title> tag to whatever you would like the title of your portfolio to be

      This should be the same across all pages.
     -->
     <link rel="icon" href="../assets/images/1311.png" />
     <title>Unemployables Portfolio</title>
    <meta name="description" content="A portfolio template for the Unemployables community.">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

		<link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/typography.css">
    <link rel="stylesheet" href="../css/utilities.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


		<script defer src="../js/script.js"></script>
	</head>
	<body>
    <!-- NAVBAR -->
    <div class="navbar">
      <a class="nav-title-link" href="../index.html">
        <!-- 
          TODO - Change the "Portfolio Title" to whatever you want displayed in the top left

          (this should be the same across all pages)
         -->
        <span class="nav-title">Seonghyun Park</span>
        <!-- 
          TODO - Change the email after 'mailto:' to your email address for contact 
        
          (this should be the same across all pages)
        -->
        <a class="button" href="mailto:spark6015@berkeley.edu">
          <span class="button-text">Contact Me</span>
        </a>
      </a>
    </div>

    <!-- MAIN PAGE CONTENT -->
    <div id="main-content">

      <!-- PROJECT HEADER -->
      <div id="project-header">

        <div class="main-title">Colorizing the Prokudin-Gorskii Photo Collection</div>
        
        <image class="project-header-image" src="../assets/colorizing_result/emir.png">
          <div class="center-body-text"> melons.tif with automatic cropping, edge detection, SSD </div>
          <div class="subheader-text ">Overview</div> 
          <div class="body-text">
            Inspired by the work of the renowned Russian chemist and photographer, Sergey Prokudin-Gorskii, the main goal of this project is to align three separate images representing the Blue, Green, and Red color channels to create a single, cohesive color photograph. To achieve the best alignment, I used the Sum of Squared Differences (SSD) which helps minimize the pixel by pixel differences between the channels. Additionally, techniques such as automatic cropping and edge detection are also implemented to further enhancing alignment accuracy. These combined methods ensure that the final image is both sharp and well-aligned.
          </div>
        
      </div>

      <hr style="width: 100%;">
      <div id="project-details">
        <div class="subheader-text">Project Details</div>
        <div class="project-details-content">
          <div class="body-text">First, I had to decide which mathematical equations to use to compute the best alignment between the reference and target color channels. I considered three options: L2 Norm, Normalized Cross-Correlation (NCC), and Sum of Squared Differences (SSD). I decided to use SSD because it is computationally simple, which made the run time faster than the other options.</div>
          <div class="subsubheader-text">L2 Norm</div>
          <div class="math-equation center-text"> \( \sqrt{ \sum_{i=1}^{n} (y_i - \hat{y}_i)^2 } \)</div>
          <div class="subsubheader-text">Normalized Cross-Correlation (NCC)</div>
          <div class="math-equation center-text"></div>$$\text{h}(f, g) = \frac{\sum_{x,y} (f(x, y) - \bar{f}) (g(x, y) - \bar{g})}{\sqrt{\sum_{x,y} (f(x, y) - \bar{f})^2 \sum_{x,y} (g(x, y) - \bar{g})^2}}$$</div>
          <div class="subsubheader-text">Sum of Squared differencess (SSD)</div>
          <div class="math-equation center-text">\( \sum_{i=1}^{n} (y_i - \hat{y}_i)^2 \)</div>
          
        
          <div class="image-row">
            <image class="one-project-image" src="../assets/colorizing_result/Pyramid SSD No gradient No Cropping cathedral.png"></image>
            <image class="one-project-image" src="../assets/colorizing_result/Pyramid SSD No gradient No Cropping tobolsk.png"></image>
          </div>
          <br>
          <div class="subheader-text">Searching for Best Alignment Implementation</div>
          <div class="body-text">I first implemented a naive method where I searched within the range [-15, 15] in both x and y directions to find the best alignment displacement. This approach worked for small images, like those in JPG format, but it took too long for .TIF files, as they were about 10 times larger than the JPG images.</div>
          <br>
          <div class="image-row">
            <div class="body-text" style="width: 80%;">To optimize and effectively search for the best displacement, I used a pyramid technique where I blurred the image with a sigma of 1 and downsampled the image by a factor of 2. I repeated this blurring using gaussian filter and downsampling process until the width or height of the image was reduced to fewer than 32 pixels. I then used a small step size, like 5 for fine alignment and 3 for coarser adjustments, to find the best alignment.</div>
            <image class="one-project-image" style="width: 20%;" src="../assets/colorizing_result/pyramid.png"></image>
            
          </div>
          <div style="text-align: right;">
            <a style="font-size: 10pt;" href="https://iipimage.sourceforge.io/documentation/images/">Source to the image</a>
          </div>
          
          <div class="project-gallery-content">
            <div class="gallery-image-container half-width">
              <image class="gallery-image" src="../assets/colorizing_result/Pyramid SSD No gradient No Cropping icon.png"></image>
              <span class="image-caption center-text">icon.tif - rougly 3500^2 pixels SSD With Pyramid </span>
            </div>
      
          </div>
          
        </div>
        <hr style="width: 100%;">
        <div class="project-details-content">
          <div class="subheader-text">Bells & Whistles</div>
          <div class="body-text">With SSD by itself, it does a decent job of matching color channels; however, there is definitely room for improvement.</div>
          <div class="subheader-text">Automatic Cropping</div>
          <div class="body-text">When matching one channel to another, borders may mislead the alignment. So, before running SSD on the pixels and applying pyramid algorithms, I applied gradients to each channel and analyzed the sums of the gradients to find significant areas of the image. I then cropped out areas with little to no significant content on each side. Also, I made sure that cropping does not crop more than 20% of each side to ensure mis detect the border and over crops the image. The process of determining how much to crop was based on the top and bottom of one channel, and the cropping was applied to all three channels.</div>
          
          <div class="project-gallery-content">
            <div class="gallery-image-container one-third-width">
              <image class="gallery-image" src="../assets/colorizing_result/nothing on lady.png"></image>
              <span class="image-caption center-text">Raw blue channel</span>
            </div>
            <div class="gallery-image-container one-third-width">
              <img src="../assets/colorizing_result/graident on lady.png" class="gallery-image">
              <span class="image-caption center-text">With gradient</span>
            </div>
            <div class="gallery-image-container one-third-width">
              <img src="../assets/colorizing_result/cropped on lady.png" class="gallery-image">
              <span class="image-caption center-text">Cropped blue channel</span>
            </div>

            <div class="gallery-image-container half-width">
              <image class="gallery-image" src="../assets/colorizing_result/Pyramid SSD No gradient No Cropping lady.png"></image>
              <span class="image-caption center-text">SDD Without Automatic Cropping</span>
            </div>
            <div class="gallery-image-container half-width">
              <img src="../assets/colorizing_result/Pyramid SSD No gradient Cropping lady.png" class="gallery-image">
              <span class="image-caption center-text">SDD With Automatic Cropping</span>
            </div>
          </div>
          

          <div class="subheader-text">Edge Detection</div>
          <div class="body-text">Another feature that I added is Edge Detection, similar to cropping, I used gradient magnitude to make edges or areas with significant change in pixel emhpasized and compare image using SSD for getting gradient magnitude, I used Sobel for x and y axis of image and took squre root of square of each x and y sobel</div>
          
          <div class="project-gallery-content">
            <div class="gallery-image-container half-width">
              <image class="gallery-image" src="../assets/colorizing_result/nothing blue harvesters.png"></image>
              <span class="image-caption center-text">Raw blue channel</span>
            </div>
            <div class="gallery-image-container half-width">
              <img src="../assets/colorizing_result/gradient blue harvesters.png" class="gallery-image">
              <span class="image-caption center-text">With gradient</span>
            </div>

            <div class="gallery-image-container half-width">
              <image class="gallery-image" src="../assets/colorizing_result/nothing red harvesters.png"></image>
              <span class="image-caption center-text">Raw red channel</span>
            </div>
            <div class="gallery-image-container half-width">
              <img src="../assets/colorizing_result/gradient red harvesters.png" class="gallery-image">
              <span class="image-caption center-text">With gradient</span>
            </div>

            <div class="gallery-image-container half-width">
              <image class="gallery-image" src="../assets/colorizing_result/Pyramid SSD No gradient No Cropping harvesters.png"></image>
              <span class="image-caption center-text">SSD With No Edge Detection</span>
            </div>
            <div class="gallery-image-container half-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient No Cropping harvesters.png" class="gallery-image">
              <span class="image-caption center-text">SDD With Edge Detection</span>
            </div>
          </div>

             <div class="body-text">The main difference when using Edge Detection is that it significantly improves the alignment accuracy by focusing on areas and pixels that have high gradient magnitude or significant pixel changes. As observed, the gradient helps emphasize the edges in the pictures, which improves the SSD score.</div>
            


          <hr style="width: 100%;">
          <div class="subheader-text">Final Result with SSD, Edge Detection, and Automatic Cropping</div>
          <div class="body-text">For the final result, I applied the features in this order:</div>
          <div class="body-text center-text">Automatic Cropping → Edge Detection → SSD</div>
          <div class="body-text">By doing this, I was able to decrease the likelihood of detecting borders as edges of images, making the SSD score much more accurate.</div>

          <div class="project-gallery-content">
            <div class="gallery-image-container quarter-width">
              <image class="gallery-image" src="../assets/colorizing_result/Pyramid SSD Gradient Cropping cathedral.png"></image>
            </div>
            <div class="gallery-image-container quarter-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient Cropping church.png" class="gallery-image">
            </div>
            <div class="gallery-image-container quarter-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient Cropping harvesters.png" class="gallery-image">
            </div>
            <div class="gallery-image-container quarter-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient Cropping three_generations.png" class="gallery-image">
            </div>

            <div class="gallery-image-container quarter-width">
              <image src="../assets/colorizing_result/Pyramid SSD Gradient Cropping icon.png" class="gallery-image" ></image>
            </div>
            <div class="gallery-image-container quarter-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient Cropping monastery.png" class="gallery-image">
            </div>
            <div class="gallery-image-container quarter-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient Cropping sculpture.png" class="gallery-image">
            </div>
            <div class="gallery-image-container quarter-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient Cropping train.png" class="gallery-image">
            </div>

            <div class="gallery-image-container quarter-width">
              <image src="../assets/colorizing_result/Pyramid SSD Gradient Cropping lady.png" class="gallery-image" ></image>
            </div>
            <div class="gallery-image-container quarter-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient Cropping tobolsk.png" class="gallery-image">
            </div>
            <div class="gallery-image-container quarter-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient Cropping self_portrait.png" class="gallery-image">
            </div>
            <div class="gallery-image-container quarter-width">
              <img src="../assets/colorizing_result/Pyramid SSD Gradient Cropping melons.png" class="gallery-image">
            </div>
          </div>

          <hr style="width: 100%;">
          <div class="subheader-text">Acknowledgment</div>
          <div class="body-text">
            I used the <a href="https://github.com/ndoherty-xyz/unemployables-portfolio-template">Unemployables Portfolio Template</a> for this website.
          </div>
          
          
        </div>
      </div>


    <!-- FOOTER -->
    <div id="footer">
      <!-- 
        TODO - Change href to your Instagram account (can also delete entire "a" element if no Instagram) 

        This should be the same across all pages.
      -->
      <a class="icon-link" target="_blank" href="https://twitter.com/whitevans_eth">
        <image src="../assets/icons/instagram.svg" class="footer-icon"/>
      </a>
      <!-- 
        TODO - Change href to your Twitter account (can also delete entire "a" element if no Twitter) 
      
        This should be the same across all pages.
      -->
      <a class="icon-link" target="_blank" href="https://twitter.com/whitevans_eth">
        <image src="../assets/icons/twitter.svg" class="footer-icon"/>
      </a>
      <!-- 
        TODO - Change the email after "mailto" to your contact email 
      
        This should be the same across all pages.
      -->
      <a class="icon-link" href="mailto:whitevans.eth@gmail.com">
        <image src="../assets/icons/mail.svg" class="footer-icon"/>
      </a>
    </div>

	</body>
</html>
